# Publishing Custom Metrics

GoFr supports custom metrics which can be generated by user for the following types:

1. Counter
2. UpDownCounter
3. Histogram
4. Gauge

## Usage

### Registering Custom Metrics

```go
func main() {
    // Create a new application
    a := gofr.New()

    // Register all the custom metrics
	a.Metrics().NewCounter(transactionSuccessful, "used to track the count of successful transactions")
    a.Metrics().NewUpDownCounter(totalCreditDaySales, "used to track the total credit sales in a day")
    a.Metrics().NewGauge(productStock, "used to track the number of products in stock")
    a.Metrics().NewHistogram(transactionTime, "used to track the time taken by a transaction", 5, 10, 15, 20, 25, 35)
    
    // Add all the routes
    a.POST("/transaction", TransactionHandler)
    a.POST("/return", ReturnHandler)
    
    // Run the application
    a.Run()
}
```

### Accessing Custom Metrics in handler

```go
func TransactionHandler(c *gofr.Context) (interface{}, error) {
    transactionStartTime := time.Now()
    
    c.Metrics().IncrementCounter(c, transactionSuccessful)
    
    tranTime := time.Now().Sub(transactionStartTime).Microseconds()
    
    c.Metrics().RecordHistogram(c, transactionTime, float64(tranTime))
    c.Metrics().DeltaUpDownCounter(c, totalCreditDaySales, 1000, "sale_type", "credit")
    c.Metrics().SetGauge(productStock, 10)
    
    return "Transaction Successful", nil
}
```
